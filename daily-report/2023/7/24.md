## 2023/07/24(月)

### 本日の目標(TODO目標/できるようになりたいこと)

- Lambdaに合わせたBackend環境を構築してローカル上でまずは動くことを確認する。

### 学習時間 (Hour)

- 9.5h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- AmazonLinux2コンテナを作成し、Backend環境を構築。
- Backendがローカルで動作することを確認。
- LambdaにRailsの機能を削ってデプロイできるか検証。
- 依存関係のエラー(libcrypt.so.1他)が昨日同様でてしまい、どのように解消できるか調査。
- Lambdaの実行環境に不足している共有ライブラリをどのように供給するか思案。
- 別のAmazonLinux2のコンテナを立てて、そこでRubyをコンパイルしてからRubyバイナリをzipにしてLambdaのレイヤーに配置し、エラーがRails起因のものに変わったことを確認。
- 昨日から起こしていたAWSのアクセスキーを流出した原因の特定。
- GitHub上にある無効化したキーの書いてあるコードの削除(一部消えない???)。
- Reactで環境変数にAPIGatewayのエンドポイントを設定。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- オリジナルプロダクトのリポジトリのクローンを作成して、リベースコマンドで過去20件分振り返って、無効化してあるアクセスキーの書いてあるファイルの削除を試みたが、なぜかどんどん同じファイルが複製されていく。可能な限り削除してそれでも消えない場合はGitHub上で作業してからpullしたが、まだ１つ残っていてどのように消せばいいのかわからない。どんどんコンフリクトが増えていってまずいことになった。

### 学んだこと(新しい気付き、学び)

- githubのrebaseコマンドの使い方。
- RubyバイナリをLambdaのレイヤーに配置する方法。
- Reactで環境変数を参照する方法。

### 感想(一日の感想、雜談)

- Lambdaにデプロイできない原因の仮説の一つである、構築環境の差異を検証するために2日やしてしまった。学習としてはかなりの成果だったが、時間がない中で焦る気持ちと、多くのことを学べた充実感とでカオスな状態になっている。

### 明日の目標(TODO目標/できるようになりたいこと)

- フロントエンドのデプロイを始める。
