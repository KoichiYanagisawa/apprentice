## 2023/07/22(土)

### 本日の目標(TODO目標/できるようになりたいこと)

- AWSのサービスを調査。
- ECSのUdemy動画の視聴を終える。

### 学習時間 (Hour)

- 15.0h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- Udemy動画の視聴。
- ECS上のコンテナを内部から操作するため、AWSのCLIとセッションマネージャーをインストール。
- Dockerイメージを小さくするため、不要なインストールを排除。
- ECRへDockerイメージをアップロード。
- ECSのタスクをコンソール画面から実行できることを確認。
- SQSでキューの管理方法を調査。
- StepFunctionsとEventBridgeでFargateが起動できないか調査。
- 複数のコンテナを使い、どのように仕事を分担させるべきか調査。
- S3の特定のバケットのディレクトリ内にputイベントがあった時、特定の拡張子が含まれていることをトリガーに、Lambdaを起動させるようにした。
- LambdaからFargateのタスク定義を呼び出して実行させるようにした。
- Fargateのタスクを立ち上げると、スクレイピング結果をS3にデータをアップロードして、そのS3のputイベントをトリガーにLambdaを起動させて...と連鎖的に動かせることを確認した。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- なし。

### 学んだこと(新しい気付き、学び)

- ECRからECSへイメージをダウンロードしてくる時のロールを設定すること。
- イベント起動の方法。
- それぞれのコンテナを連携させる方法。
- AWSサービスの使い方(ECS,ECR,SQS,StepFunctions,EventBridge)。
- VPC内のFargateに対してVPC内のLambdaから接続する時はEndPointが必要になる(今回は外に出した)。

### 感想(一日の感想、雜談)

- DynamoDB対応の遅れを早く取り戻したい。とにかく「まずは終わらせる」ことを目標にする。

### 明日の目標(TODO目標/できるようになりたいこと)

- 決まった時刻にFargateが立ち上がるように実装。
- バックエンド側のLambdaとAPIGatewayを準備する。
