## 2023/07/23(日)

### 本日の目標(TODO目標/できるようになりたいこと)

- 決まった時刻にFargateが立ち上がるように実装。
- バックエンド側のLambdaとAPIGatewayを準備する。

### 学習時間 (Hour)

- 15.5h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- AmazonEventBridgeでスケジュールを設定した(実行されなかったので明日の朝再度試行)。
- AWS Systems Managerのパラメータストアを利用した環境変数の一括管理。
- APIGatewayとLambdaを使ってどのように設定するか調査。
- Lambda上に今の環境をデプロイできなかったので、DockerのコンテナをAmazonLinux2にして動作の検証。
- AWSから「ACTION REQUIRED: Your AWS Access Key is Exposed for AWS Account」とついた連絡が来てしまい対応。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- .gitignoreファイルに.envを記述していたのになぜか流出させてしまい、原因がわからない。
- Lambdaにデプロイできない(libcrypt.so.1が無いとでる)。

### 学んだこと(新しい気付き、学び)

- ローカルのDocker上で動いていても、Lambdaに環境を移すとOS関連の依存関係を解決できなくなる。
- レイヤーを設定して環境変数から参照させる形を取ったが、あまりにも数が多くて手に負えなかった。
- AWSの方でも、GitHubにアクセスキーなどが誤ってpushされていないか見てくれていると知った。

### 感想(一日の感想、雜談)

- Lambdaの環境に合わせて最初から開発していたつもりだったが、AmazonLinux2のDockerがあることを知らずにRuby3.2で開発を進めてしまった。結果、OSの差異を吸収することができなかった。また手戻りが発生してしまうが、未知の領域なのでトライアンドエラーしかない。。。

### 明日の目標(TODO目標/できるようになりたいこと)

- Lambdaに合わせたBackend環境を構築してローカル上でまずは動くことを確認する。
