## 2023/07/19(水)

### 本日の目標(TODO目標/できるようになりたいこと)

- ECSとECRを使用してみる。
- スクレイピング用コンテナを分割してメモリをどこで多く使用しているのか調査する。

### 学習時間 (Hour)

- 15.0h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- スクレイピングコンテナを3つに分けた(URL取得、商品情報取得、DB登録削除)。
- それぞれ独立して動かすことができるように途中経過のファイルをS3へアップロードするように変更。
- コンテナが立ち上がったらS3のアップロードされたファイルを取得して処理するように変更。
- 複数のコンテナが同じファイルを取り合ってしまうので、ファイルをロックする機構がないか調査。
- S3のファイルのタグを付け替えて見分けられるようにして、コンテナ同士でファイルの取り合いにならないように変更。
- 工程毎にコンテナを切り替える必要が出てしまったため、どのようにコンテナの集団を切り替えるべきか調査。
- Aurora V2 Serverlessの費用がかなり高めのため、急遽別のDBサーバーを用意することにした。
- 費用を考え、NoSQLのDynamoDBに変更することにして、ソースコードを書き換え中。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- SQLをNoSQLに書き換える方法。

### 学んだこと(新しい気付き、学び)

- S3のファイルを取得後にタグを付け替えられること。
- 単一テーブルで複数のテーブルを扱うようにする考え方。

### 感想(一日の感想、雜談)

- 当初考えていた運用費用から3倍以上に跳ね上がってしまうことに気がついた。現時点ではお金で解決するのではなく、時間が許す限りは知恵で解決するための努力をすることにした。

### 明日の目標(TODO目標/できるようになりたいこと)

- SQLをNoSQLにする対応。
