## 2023/07/28(金)

### 本日の目標(TODO目標/できるようになりたいこと)

- バックエンドのデプロイで、ローカルでコマンドを実行して行なっているのを、GitHubActionsからそのコマンドを利用できるようにする。

### 学習時間 (Hour)

- 13.0h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- GitHubActionsでバックエンドもデプロイできるようにした。
- IAMユーザーやRoleの権限を削りすぎて動かなくなってしまったため調査と対応。
- 意図せずGitHubのSecretsの環境変数と、AWSの環境変数を競合させてしてしまい不具合対応。
- スクレイピングを行っているコンテナをGitHubActionsでECRへのデプロイ。
- SecretsManagerを使った環境変数管理へ変更。
- タスクの多重起動で同じファイルを取り合わないようにする検証。
- フロントエンドのデプロイが不安定なため調査と対策。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- なし。

### 学んだこと(新しい気付き、学び)

- 命名ルールは決めておき、サフィックスとプレフィックスで判断ができるようにすること。
- SecretsManagerの使い方。
- タスク実行ロールにポリシーを追加してSecretsManagerをコンテナから参照する方法。
- GitHubActionsではnode_modulesをキャッシュすると動作が不安定になってしまい、表示できないページがでることがある。

### 感想(一日の感想、雜談)

- 命名ルールをもっと初期のタイミングでルール付けておけばよかった。環境変数に一般的な名前をつければ間違わないと考えていたが、IAMユーザーが増えていき、SSMパラメーターストアからも参照するので似たような名前がたくさんできてしまった。現在はプレフィックスとサフィックスである程度判別つく程度には直せた。

### 明日の目標(TODO目標/できるようになりたいこと)

- リファクタリングをする(全体の50%)。
- 単体テストのコードを書く(全体の50%)。
