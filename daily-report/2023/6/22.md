## 2023/06/22(木)

### 本日の目標(TODO目標/できるようになりたいこと)

- WebサーバーとAPサーバーを立てる。
- 終わり次第CIの学習を再開する。

### 学習時間 (Hour)

- 14.5h

### 目標振り返り(TODO進捗/できるようになりたいこと振り返り)

- nginx & passenger構成は一旦諦めて、nginx & pumaの構成へ変更し、EC2立直し。
- グローバルIPアドレスでのアクセスからURLへ変更し動作確認。
- nginxの設定ファイルの記述方法を学習し、nginxをリバースプロキシとして設定。
- pumaの記述方法を学習し、localhost:3000しか解放しないようにして、nginxからしか受け付けないように設定。
- pumaをproduction環境で起動するために、secret_key_baseを準備して動作確認。
- SSL化対応。
- ALBにSSL証明書を持たせALBとEC2の間をポート80で繋ぎ直し。
- EC2のインバウンドルールが0.0.0.0のport80になっており全て通っていたのでport80のALBセキュリティグループからの通信のみに変更。
- draw.ioの使い方調査。
- RealWorldのステップ2を解く。

### 詰まっていること(実現したいこと/現状/行ったこと/仮説)

- なし。

### 学んだこと(新しい気付き、学び)

- Railsのアプリ内にあらかじめ用意された環境が3つあり、それぞれ切り替えることができる。
- Postmanにconsoleがあり、エラーがそちらに出力されていることを知った。
- インバウンドルールに他のセキュリティグループを指定できること。

### 感想(一日の感想、雜談)

- SSL化した後、もしかしたらと思って外部から80番ポートを指定してEC2に直接繋いでみたら繋がってしまったので確認したらセキュリティグループのインバウンドルールに0.0.0.0:80があったので、段階を踏んで疎通確認をした副作用だと感じた。
- CI/CDのためにGitHub Actionsを学んできたので早く実践に移りたい。ようやく点と点がつながり始めた。

### 明日の目標(TODO目標/できるようになりたいこと)

- QUESTの13~15を解く。
